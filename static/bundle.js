(()=>{"use strict";var e,t=function(e,t,i,n){return new(i||(i=Promise))((function(s,r){function a(e){try{l(n.next(e))}catch(e){r(e)}}function o(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,o)}l((n=n.apply(e,t||[])).next())}))};function i(){let e,t=new Promise((function(t,i){e={resolve:t,reject:i}}));return e.promise=t,e}!function(e){e[e.NeverRun=0]="NeverRun",e[e.Running=1]="Running",e[e.Failed=2]="Failed",e[e.Succeeded=3]="Succeeded"}(e||(e={}));class n{get state(){return this.stateImpl}constructor(t){this.futureResult=null,this.stateImpl=e.NeverRun,this.task=t}run(i=!0){return t(this,void 0,void 0,(function*(){if(this.stateImpl===e.Failed&&!1===i||this.stateImpl===e.Succeeded||this.stateImpl===e.Running)return this.futureResult;this.stateImpl=e.Running,this.futureResult=this.task();try{let t=yield this.futureResult;return this.stateImpl=e.Succeeded,t}catch(t){throw this.stateImpl=e.Failed,t}}))}}function s(e,t,i,n){let s=c(n*n);return function(e,...t){let i=[e[0],e[1]];for(let e=0;e<t.length;e++)i[0]+=t[e][0],i[1]+=t[e][1];return i}(l(l(i,[.5,.5]),s),l(t,[n,n]),e)}function r(e,t){return e[0]*t[0]+e[1]*t[1]}function a(e,t){return[e[0]-t[0],e[1]-t[1]]}function o(e,t){return[e[0]+t[0],e[1]+t[1]]}function l(e,t){return[e[0]*t[0],e[1]*t[1]]}function h(e,t){return[e[0]*t,e[1]*t]}function d(e,t){return[e[0]/t[0],e[1]/t[1]]}function c(e){return[e,e]}function u(e){return Math.sqrt(r(e,e))}function p(e,t,i){return o(e,l(a(t,e),c(i)))}var g=function(e,t,i,n){return new(i||(i=Promise))((function(s,r){function a(e){try{l(n.next(e))}catch(e){r(e)}}function o(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,o)}l((n=n.apply(e,t||[])).next())}))};function m(e,t,i=0){return function(e,t,i=0){return e.left<=t[0]+i&&e.right+i>=t[0]&&e.top<=t[1]+i&&e.bottom+i>=t[1]}(t.getBoundingClientRect(),e,i)}function f(e,t){var i;if("none"==getComputedStyle(e).display){let n=e.parentElement,s=null;null!==n&&(s=n.style.position,function(e,...t){for(let i=0;i<t.length;i++)if(t[i]===e)return!0;return!1}(window.getComputedStyle(n).position,"relative","sticky","absolute","fixed")||(n.style.position="relative"));let r=e.style.visibility,a=e.style.position,o=e.classList.contains("hidden"),l=e.style.display;e.style.visibility="hidden",e.style.position="absolute",e.classList.remove("hidden"),e.style.display="block",i=t(e),e.style.display=l,e.style.position=a,o&&e.classList.add("hidden"),e.style.visibility=r,null!==n&&n.style.position!=s&&(n.style.position=s)}else i=t(e);return i}function w(e){return f(e,(function(){return e.offsetHeight}))}function v(e){return f(e,(function(){let t=getComputedStyle(e),i=e=>{let t=parseInt(e);return void 0===t||isNaN(t)?0:t};return{paddingTop:i(t.paddingTop),paddingBottom:i(t.paddingBottom),height:i(t.height)}}))}function y(e){e.classList.add("hidden")}function b(e){e.style.setProperty("-webkit-transition","none"),e.style.setProperty("-moz-transition","none"),e.style.setProperty("-o-transition","none"),e.style.setProperty("transition","none")}function P(e){e.style.removeProperty("-webkit-transition"),e.style.removeProperty("-moz-transition"),e.style.removeProperty("-o-transition"),e.style.removeProperty("transition")}function S(e,t){return new Promise((function(i,n){function s(){e.removeEventListener("load",s),e.removeEventListener("error",r),i()}function r(t){e.removeEventListener("load",s),e.removeEventListener("error",r),n(new Error("The element failed to load."+(t.message?"\nReason: "+t.message:"")))}e.addEventListener("load",s),e.addEventListener("error",r),setTimeout((()=>{e.removeEventListener("load",s),e.removeEventListener("error",r),n(new Error("Waiting for element to load timed out."))}),t)}))}function I(e,t=5e3){return g(this,void 0,void 0,(function*(){let i=e.contentDocument;if(null===i&&null!==e.contentWindow&&(i=e.contentWindow.document),null===i||"complete"!==i.readyState)return S(e,t)}))}function T(e,t=5e3){return g(this,void 0,void 0,(function*(){if(!e.complete)return S(e,t)}))}function C(e,t=5e3){return g(this,void 0,void 0,(function*(){if("style"===e.as&&null===e.sheet)return S(e,t)}))}function x(e,t=5e3){return g(this,void 0,void 0,(function*(){return e.isReady}))}function k(e,t,i){return e}function L(e,t,i){return(t-e)*i+e}function E(e,t,i){return L(e,t,3*Math.pow(i,2)-2*Math.pow(i,3))}function A(e,t,i){return(i-e)/(t-e)}function D(e,t,i,n=E){return[n(e[0],t[0],i),n(e[1],t[1],i),n(e[2],t[2],i)]}function M(...e){let t=[];for(let e=0;e<arguments.length;e++)Array.isArray(arguments[e])?t=t.concat(arguments[e]):t.push(arguments[e]);return t}class R{constructor(e){this.alwaysSet=e}setIfRequired(e){this.alwaysSet&&this.set(e)}static setAllStates(e,t){t&&t.forEach((function(t){t.set(e)}))}static setAllRequiredStates(e,t){t&&t.forEach((function(t){t.setIfRequired(e)}))}static restoreAllStates(e,t){t&&t.forEach((function(t){t.restore(e)}))}}class H extends R{constructor(e,t,i){super(i),this.restoreValue=null,this.name=e,this.value=t}set(e){null===this.restoreValue&&(this.restoreValue=this.internalSet(e,this.name,this.value))}restore(e){null!==this.restoreValue&&(this.internalRestore(e,this.name,this.restoreValue),this.restoreValue=null)}}class N extends H{constructor(e,t,i=!1){super(e,t,i)}internalSet(e,t,i){let n=e.style[t];return e.style[t]=i,n}internalRestore(e,t,i){e.style[t]=i}}class O extends H{constructor(e,t,i=!1){super(e,t,i)}internalSet(e,t,i){if(e.parentElement){let n=e.parentElement.style[t];return e.parentElement.style[t]=i,n}return""}internalRestore(e,t,i){e.parentElement&&(e.parentElement.style[t]=i)}}class q extends H{constructor(e,t,i=!1){super(e,t,i)}internalSet(e,t,i){let n=e.classList.contains(t);return i?e.classList.add(t):e.classList.remove(t),n}internalRestore(e,t,i){i?e.classList.add(t):e.classList.remove(t)}}class B{constructor(){this.buffer=new Array(2),this.afterLast=1,this.beforeFirst=0,this.count=0}[Symbol.iterator](){let e=this.iterate();return{next(){let t,i=e.next();return t=void 0===i?{done:!0,value:void 0}:{done:!1,value:i},t}}}iterate(){let e=this.nextIndex(this.beforeFirst),t=this.count;return{next:()=>{if(t<=0)return;let i=this.buffer[e];return e=this.nextIndex(e),t--,i}}}growIfNeeded(){if(this.count===this.buffer.length){let e=new Array(Math.ceil(1.618*this.buffer.length+1)),t=this.iterate(),i=1;for(let n=t.next();void 0!==n;n=t.next())e[i++]=n;this.buffer=e,this.beforeFirst=0,this.afterLast=i}}nextIndex(e){return++e===this.buffer.length&&(e=0),e}previousIndex(e){return-1==--e&&(e=this.buffer.length-1),e}get size(){return this.count}pushFront(e){this.growIfNeeded(),this.buffer[this.beforeFirst]=e,this.beforeFirst=this.previousIndex(this.beforeFirst),this.count++}peekFront(){if(0!==this.count)return this.buffer[this.nextIndex(this.beforeFirst)]}popFront(){if(0===this.count)return;let e=this.nextIndex(this.beforeFirst),t=this.buffer[e];return this.buffer[e]=void 0,this.beforeFirst=e,this.count--,t}pushBack(e){this.growIfNeeded(),this.buffer[this.afterLast]=e,this.afterLast=this.nextIndex(this.afterLast),this.count++}peekBack(){if(0!==this.count)return this.buffer[this.previousIndex(this.afterLast)]}popBack(){if(0===this.count)return;let e=this.previousIndex(this.afterLast),t=this.buffer[e];return this.buffer[e]=void 0,this.afterLast=e,this.count--,t}}const V=new class{get paused(){return this.pausedImpl}constructor(){this.elementAnimationsMap=new Map,this.queuedAnimation=[],this.pausedImpl=!1,this.pausedTickQueue=new B,this.running=!1,this.lastUpdate=performance.now(),this.callback=this.tick.bind(this)}tick(e){if(!this.pausedImpl||this.pausedTickQueue.size>0){for(let e=0;e<this.queuedAnimation.length;e++){let t=this.queuedAnimation[e].element,i=this.elementAnimationsMap.get(t);void 0===i&&(i=new Array,this.elementAnimationsMap.set(t,i)),i.push(this.queuedAnimation[e].animation)}let t;this.queuedAnimation=[];let i=this.pausedImpl?this.pausedTickQueue.popFront():null;t=null!=i?i:e-(null===this.lastUpdate?e:this.lastUpdate),this.elementAnimationsMap.forEach((function(e,i){e.length>0&&(e[0].tick(t)||(e.shift(),0===e.length&&this.elementAnimationsMap.delete(i)))}),this)}this.elementAnimationsMap.size>0||this.queuedAnimation.length>0?(this.lastUpdate=e,window.requestAnimationFrame(this.callback)):this.running=!1}queuePauseTick(e=null){this.pausedTickQueue.pushBack(e)}pausePlay(){this.pausedImpl=!this.pausedImpl}queueAnimation(e,t){this.queuedAnimation.push({element:e,animation:t}),this.running||(this.running=!0,this.lastUpdate=null,window.requestAnimationFrame(this.callback))}getTickingAnimation(e){let t=this.elementAnimationsMap.get(e);return void 0===t?null:t[0]}getAllQueuedAnimationsOrGenerators(e){return this.elementAnimationsMap.get(e)}};class F{constructor(){this.listeners=new Map}get size(){return this.listeners.size}add(e,t=null){return this.listeners.set(e,t),e}remove(e){this.listeners.delete(e)}dispatch(...e){this.listeners.forEach((function(t,i){i.apply(t,e)}))}addAll(e){e.listeners.forEach((function(e,t){this.add(t,e)}),this)}static whenAll(...e){let t=i(),n=e.length;for(let i=0;i<e.length;i++)!function(){let s=e[i],r=function(...e){n--,s.remove(r),0===n&&t.resolve()};s.add(r)}();return t.promise}}class W{get isReversed(){return this.isReversedImpl}constructor({element:e,animationChannels:t=[],preStates:i=[],postStates:n=[],timeInterpolator:s=null}){this.name=null,this.preSetup=new F,this.postSetup=new F,this.preTick=new F,this.postTick=new F,this.preCleanup=new F,this.postCleanup=new F,this.preStates=[],this.postStates=[],this.isReversedImpl=!1,this.time=0,this.duration=0,this.setupRequired=!0,this.cancelRequested=!1,this.element=e,this.animationChannels=t,this.preStates=i,this.postStates=n,this.timeInterpolator=s;for(let e=0;e<t.length;e++)this.postStates=M(this.postStates,t[e].getSetterCleanup());t.forEach((function(e){e.getStopTime()>this.duration&&(this.duration=e.getStopTime())}),this)}tick(e){if(this.setupRequired){if(this.isReversed)return!1;this.preSetup.dispatch(this),R.setAllStates(this.element,this.preStates),this.postSetup.dispatch(this),this.setupRequired=!1}this.cancelRequested?this.time=this.getEndTime():this.time+=this.isReversed?-e:e;let t=this.time;if(null!=this.timeInterpolator){let e=A(0,this.duration,this.time);e>0&&e<1&&(t=this.timeInterpolator(0,this.duration,e))}return this.preTick.dispatch(this),this.animationChannels.forEach((e=>{e.tick(this.element,t)})),this.postTick.dispatch(this),!this.isDone()||(this.preCleanup.dispatch(this),this.isReversed?(R.restoreAllStates(this.element,this.preStates),R.setAllRequiredStates(this.element,this.postStates)):R.setAllStates(this.element,this.postStates),this.postCleanup.dispatch(this),!1)}reverse(){this.isReversedImpl=!this.isReversedImpl}addChannels(...e){e.forEach((e=>{e.getSetterCleanup().forEach((e=>{this.postStates.push(e)})),e.getStopTime()>this.duration&&(this.duration=e.getStopTime()),this.animationChannels.push(e)}))}addAdditionalPreStates(...e){e.forEach((e=>{e.set(this.element),this.preStates.push(e)}))}getEndTime(){return this.isReversedImpl?0:this.duration}completeNextFrame(){this.cancelRequested=!0}isDone(){return this.isReversedImpl?this.time<=0:this.time>=this.duration}queueAnimation(){return V.queueAnimation(this.element,this),this}}function U(e,t,i){return e<t?t:e>i?i:e}class z{constructor(e,t,i,n=null){if(this.wasInBoundsLastTick=!1,this.keyframes=e,this.dataSetter=t,this.keyframeInterpolator=i,this.timeInterpolator=n,e.length<2)throw`AnimationChannel(...): At least 2 keyframes are required but only ${e.length} was provided`;let s=0;for(let t=0;t<e.length;t++)e[t].startTime=e[t].delay+s,s+=e[t].delay,e[t].left=t>0?e[t-1]:null,e[t].right=t+1<e.length?e[t+1]:null;this.activeKeyframes={left:e[0],right:e[1]}}getSetterCleanup(){return this.dataSetter.getCleanup()}moveToCorrectKeyframes(e){for(;this.activeKeyframes.left.startTime>e&&null!==this.activeKeyframes.left.left;)this.activeKeyframes.right=this.activeKeyframes.left,this.activeKeyframes.left=this.activeKeyframes.left.left;for(;this.activeKeyframes.right.startTime<=e&&null!==this.activeKeyframes.right.right;)this.activeKeyframes.left=this.activeKeyframes.right,this.activeKeyframes.right=this.activeKeyframes.right.right}getStopTime(){return this.keyframes[this.keyframes.length-1].startTime}getStartTime(){return this.keyframes[0].startTime}tick(e,t){if(this.timeInterpolator){let e=this.getStartTime(),i=this.getStopTime(),n=A(e,i,t);n>0&&n<1&&(t=this.timeInterpolator(e,i,n))}this.moveToCorrectKeyframes(t);let i=t<this.activeKeyframes.left.startTime||t>this.activeKeyframes.right.startTime;if(!i||this.wasInBoundsLastTick){let i=U(A(this.activeKeyframes.left.startTime,this.activeKeyframes.right.startTime,t),0,1);this.dataSetter.set(e,this.keyframeInterpolator(this.activeKeyframes.left.data,this.activeKeyframes.right.data,i),i)}this.wasInBoundsLastTick=!i}}class ${constructor(e,t){this.startTime=0,this.left=null,this.right=null,this.delay=e,this.data=t}}class K{constructor(e){this.cleanup=e}getCleanup(){return this.cleanup?this.getCleanupInternal():[]}}class _ extends K{constructor(e,t=!0){super(t),this.attributeName=e}set(e,t){e.style.setProperty(this.attributeName,t.toString()+"px")}getCleanupInternal(){return[new N(this.attributeName,"",!0)]}}function Q(e,t,i){let n=new W({element:e,preStates:M(new N("overflow","hidden"),new q("hidden",!1)),postStates:M(new N("overflow","")),timeInterpolator:i});return n.postSetup.add((()=>{let i=v(e);n.addChannels(new z([new $(0,0),new $(t,i.height)],new _("height"),L),new z([new $(0,0),new $(t,i.paddingTop)],new _("paddingTop"),L),new z([new $(0,0),new $(t,i.paddingBottom)],new _("paddingBottom"),L))})),n.name="slideDown",n}let Y=function(e,t,i){let n=new W({element:e,preStates:M(new N("overflow","hidden"),new q("hidden",!1)),postStates:M(new q("hidden",!0),new N("overflow","")),timeInterpolator:i});return n.postSetup.add((()=>{let i=v(e);n.addChannels(new z([new $(0,i.height),new $(t,0)],new _("height"),L),new z([new $(0,i.paddingTop),new $(t,0)],new _("paddingTop"),L),new z([new $(0,i.paddingBottom),new $(t,0)],new _("paddingBottom"),L))})),n.name="slideUp",n};const j=new F;window.onresize=function(e){j.dispatch(e)};const X=new F;window.onkeydown=function(e){X.dispatch(e||window.event)};class J extends class{constructor(e){this.pageRef=e}}{constructor(e,t,i){super(e),this.parent=null,this.children=[],this.element=t,this.childLinkContainer=document.querySelector(`.sub-page-links[pageRef="${e}"]`);let n=i.pageNodes.get(e);if(void 0===n)throw"There is no page for this link (pageRef = "+e;n.isSelectedChild&&this.select(),n.onSelected.add(this.select.bind(this)),n.onDeselected.add(this.deselect.bind(this))}get defaultLeaf(){let e=this;for(;e.children.length>0;)e=e.children[0];return e}get defaultChild(){return 0===this.children.length?null:this.children[0]}deselect(){this.element.classList.remove("selected"),null!==this.childLinkContainer&&function(e,t=500,i=E){let n=V.getTickingAnimation(e);n&&"slideDown"===n.name?n.reverse():Y(e,t,i).queueAnimation()}(this.childLinkContainer,250)}select(){this.element.classList.add("selected"),null!==this.childLinkContainer&&function(e,t=500,i=E){let n=V.getTickingAnimation(e);n&&"slideUp"===n.name?n.reverse():Q(e,t,i).queueAnimation()}(this.childLinkContainer,250)}}class G{get linkMap(){return this.linkMapImpl}get topLevelLinks(){return this.topLevelLinksImpl}constructor(e){if(this.linkMapImpl=new Map,this.topLevelLinksImpl=[],this.legend=document.querySelector(".legend"),this.legendPullOut=document.querySelector(".legend-tab-out"),this.legendPullIn=document.querySelector(".legend-tab-in"),this.homePageLink=null,this.selectedLink=null,this.pageManager=e,this.createLinks(),null!==e.root.defaultChild){let t=this.linkMapImpl.get(e.root.defaultChild.pageRef);this.homePageLink=void 0===t?null:t,this.selectedLink=this.homePageLink}this.legend.addEventListener("click",(function(e){e.stopPropagation()})),this.legendPullOut.addEventListener("click",(function(e){e.stopPropagation()})),document.body.addEventListener("click",function(e){this.legend.classList.add("legend-collapsed")}.bind(this)),this.legendPullIn.addEventListener("click",function(e){this.legend.classList.add("legend-collapsed")}.bind(this)),this.legendPullOut.addEventListener("click",function(e){this.legend.classList.remove("legend-collapsed")}.bind(this)),this.linkMapImpl.forEach((function(e){null!==e&&null!==e.element&&e.element.addEventListener("click",(()=>{let t=e===this.selectedLink&&null===e.parent&&null!==this.homePageLink?this.homePageLink:e;this.linkClicked(t,!0)}))}),this),j.add((()=>{this.legend.style.height=window.innerHeight+"px"})),this.legend.style.height=window.innerHeight+"px"}createLinks(){let e=document.querySelector(".legend");null!==e?e.querySelectorAll(".page-link").forEach((e=>{let t=e.getAttribute("pageRef");if(null===t)console.error("A page-link exists without a pageRef attribute.\n\telement="+e);else if(this.linkMapImpl.has(t))console.error("A page-link with the same pageRef already exists.\n\tpageRef="+t);else{let i=new J(t,e,this.pageManager);this.linkMapImpl.set(t,i);let n=this.getParent(i.element);if(null===n)this.topLevelLinks.push(i);else{let e=this.linkMapImpl.get(n);void 0!==e?(e.children.push(i),i.parent=e):console.error(`A page-link (pageRef=${t}) has a parent link (pageRef=${n}), but no element was found with that pageRef. Note that parent's MUST be placed before children in HTML.`)}}})):console.error("no element with class 'legend' was found in the document")}getParent(e){if(null!==e.parentElement&&e.parentElement.classList.contains("sub-page-links")){let t=e.parentElement.getAttribute("pageRef");return null===t&&console.error("A link was found within a sub-page-links container, but that container doesn't have a pageRef attribute indicate their parent."),t}return null}linkClicked(e,t=!1){null!==this.pageManager&&(this.selectedLink=e,this.pageManager.selectPage(e.pageRef,t),this.legend.classList.add("legend-collapsed"))}}const Z=new class extends K{constructor(e=!0){super(e)}set(e,t){e.style.opacity=t.toString(),e.style.filter="alpha(opacity="+t+")"}getCleanupInternal(){return[new N("opacity","",!0),new N("filter","",!0)]}};function ee({element:e,start:t,end:i,valueInterpolator:n,setter:s,preStates:r=[],postStates:a=[],duration:o=500,timeInterpolator:l=null}){let h=new W({element:e,animationChannels:[new z([new $(0,t),new $(o,i)],s,n)],timeInterpolator:l,preStates:r,postStates:a}).queueAnimation();return h.name="tween",h}function te(e,t=500){let i=ee({element:e,start:0,end:1,valueInterpolator:E,setter:Z,duration:t,preStates:[new q("hidden",!1)]});return i.name="fadeIn",i}let ie=document.querySelector(".site-body");class ne{constructor(){this.animation=null,this.element=document.createElement("div"),this.element.classList.add("lds-spinner"),this.element.innerHTML="<div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div>",y(this.element),document.body.appendChild(this.element),null===ie&&console.warn('No element with class="site-body" was present in the document. The loading symbol will be centered to the viewport instead of the site-body.'),this.position(),window.addEventListener("resize",this.position.bind(this))}position(){let e=this.getCenter(),t=f(i=this.element,(function(){return{x:i.offsetWidth,y:i.offsetHeight}}));var i;this.element.style.left=e.x-t.x/2+"px",this.element.style.top=e.y-t.y/2+"px"}getCenter(){let e;if(null!==ie){let t=ie.getBoundingClientRect();e=(t.left+t.right)/2}else e=window.innerWidth/2;return{x:e,y:window.innerHeight/2}}reveal(){this.animation=te(this.element),this.animation.name="Loading Fade-in"}hide(){null===this.animation||this.animation.isDone()?y(this.element):(this.animation.completeNextFrame(),this.animation.postCleanup.add((()=>{y(this.element)}))),this.animation=null}}var se,re,ae;new class{constructor(){this.lines=new Set,this.console=null}addLine(e){null===this.console&&(this.console=document.createElement("div"),this.console.style.position="fixed",this.console.style.top="0",this.console.style.zIndex="2147483647",this.console.style.backgroundColor="rgba(0, 0, 0, 0.666)",this.console.style.color="rgb(255, 255, 255)",this.console.style.width="100%",document.body.appendChild(this.console)),this.lines.add(e),this.console.appendChild(e)}removeLine(e){this.lines.delete(e),0===this.lines.size&&null!==this.console&&document.body.removeChild(this.console)}},function(e){e[e.All=0]="All",e[e.Warning=1]="Warning",e[e.Error=2]="Error",e[e.Nothing=3]="Nothing"}(se||(se={})),function(e){e[e.Pages=0]="Pages",e[e.PageSwapping=1]="PageSwapping",e[e.PageSwappingAnim=2]="PageSwappingAnim",e[e.Mutations=3]="Mutations"}(re||(re={})),ae=re,Object.keys(ae).filter((e=>isNaN(Number(e)))).length;let oe=function(e,...t){};new Set;class le{get currentTarget(){return null!==this.nextPage?this.nextPage:null!==this.incomingPage?this.incomingPage:null!==this.currentPage?this.currentPage:void 0}constructor(e,t,i){this.currentPage=null,this.incomingPage=null,this.nextPage=null,this.animateNextSwap=!0,this.currentAnimations=null,this.owner=e,this.swapFunction=t,this.onSwapAnimationCreated=i,e.onMadeHidden.add((()=>{this.completeImmediately()}))}completeImmediately(){null!==this.currentAnimations&&(this.currentAnimations.inAnimation.completeNextFrame(),this.currentAnimations.outAnimation.completeNextFrame())}nextPageBroughtIn(){this.currentPage=this.incomingPage,this.incomingPage=null,this.currentAnimations=null,this.bringNextPageIn()}bringNextPageIn(){if(null!==this.nextPage){this.incomingPage=this.nextPage,this.nextPage=null;let e=this.animateNextSwap;if(null!==this.incomingPage.parent&&(this.incomingPage.parent.isVisible||(e=!1)),e&&null!==this.currentPage){let e;this.currentAnimations=this.swapFunction(this.incomingPage,this.currentPage),F.whenAll(this.currentAnimations.inAnimation.postCleanup,this.currentAnimations.outAnimation.postCleanup).then(this.nextPageBroughtIn.bind(this)),this.onSwapAnimationCreated(this.incomingPage,this.currentPage,this.currentAnimations),e=w(this.incomingPage.element)>w(this.currentPage.element)?this.currentAnimations.outAnimation:this.currentAnimations.inAnimation,e.preStates.push(new N("position","absolute")),e.preStates.push(new N("top","0")),e.postStates.push(new N("position","")),e.postStates.push(new N("top",""))}else this.incomingPage.elementHidden=!0,null!==this.currentPage&&(this.currentPage.elementHidden=!1),this.nextPageBroughtIn()}}setNextPage(e,t){this.animateNextSwap=t,this.incomingPage!==e?this.nextPage!==e&&(this.currentPage===e&&null===this.incomingPage||(this.nextPage=e,null===this.incomingPage&&this.bringNextPageIn())):this.nextPage=null}}class he{get order(){return this.owner.siblingOrder}get selectedChild(){return null!==this.owner.selectedChild?this.owner.selectedChild.page:null}get childIsLoaded(){return null!==this.owner.selectedChild&&null!==this.owner.selectedChild.page}get hasChild(){return null!==this.owner.selectedChild}constructor(e,t,i,n){this.onMadeVisible=new F,this.onMadeHidden=new F,this.children=[],this.madeVisible=!1,this.element=e,this.owner=t,this.parent=null!==this.owner.parent?this.owner.parent.page:null,this.childPageContainer=e.querySelector(`.child-page-container[pageRef="${this.owner.pageRef}"]`),null!==this.parent&&this.parent.children.push(this),this.pageSwapper=new le(this,i,this.swapAnimationsCreated.bind(this))}addToParent(e){return t=this,n=void 0,r=function*(){this.element.classList.add("page"),this.element.style.position="fixed",this.element.style.left="150vw",this.element.style.top="0",e.appendChild(this.element);for(let e of this.owner.pageManager.addons)e.pageCreated(this,this.owner.pageManager);try{yield function(e,t=5e3){return g(this,void 0,void 0,(function*(){let n=[];function s(e,t,i){e.forEach((e=>{n.push(t(e,i))}))}return s(e.querySelectorAll("iframe"),I,t),s(e.querySelectorAll("link"),C,t),s(e.querySelectorAll("img"),T,t),s(e.querySelectorAll("youtube-video"),x,t),yield Promise.all(n),function(e){let t=i(),n=()=>{--e>0?requestAnimationFrame(n):t.resolve()};return requestAnimationFrame(n),t.promise}(10)}))}(this.element,he.childElementLoadTimeoutMS)}catch(e){}this.element.classList.add("hidden"),this.element.style.position="",this.element.style.left="",this.element.style.top=""},new((s=void 0)||(s=Promise))((function(e,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function o(e){try{l(r.throw(e))}catch(e){i(e)}}function l(t){var i;t.done?e(t.value):(i=t.value,i instanceof s?i:new s((function(e){e(i)}))).then(a,o)}l((r=r.apply(t,n||[])).next())}));var t,n,s,r}get isVisible(){return!(null!==this.parent&&!this.parent.isVisible||this.elementHidden)}get elementHidden(){return this.element.classList.contains("hidden")}set elementHidden(e){e?this.element.classList.remove("hidden"):this.element.classList.add("hidden"),this.ownVisibilityChanged(e)}ownVisibilityChanged(e){(null===this.parent||this.parent.isVisible)&&(e?this.onMadeVisible.dispatch(this):this.onMadeHidden.dispatch(this),this.children.forEach((t=>{t.parentsVisibilityChanged(e)})))}parentsVisibilityChanged(e){this.elementHidden||this.ownVisibilityChanged(e)}present(e){null!==this.selectedChild&&this.selectedChild.present(e),null!==this.parent&&this.parent.presentChild(this,e)}remove(){this.element.remove()}presentChild(e,t){this.pageSwapper.setNextPage(e,t)}swapAnimationsCreated(e,t,i){F.whenAll(i.inAnimation.postSetup,i.outAnimation.postSetup).then((()=>{e.ownVisibilityChanged(!0)})),F.whenAll(i.inAnimation.postCleanup,i.outAnimation.postCleanup).then((()=>{t.ownVisibilityChanged(!1)}))}fadeIn(){this.madeVisible||(this.madeVisible=!0,te(this.element).postSetup.add((()=>{this.ownVisibilityChanged(!0)})))}}he.childElementLoadTimeoutMS=5e3;var de=function(e,t,i,n){return new(i||(i=Promise))((function(s,r){function a(e){try{l(n.next(e))}catch(e){r(e)}}function o(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,o)}l((n=n.apply(e,t||[])).next())}))};let ce=document.createElement("div");ce.style.width="100%",ce.style.position="absolute",document.body.appendChild(ce);class ue{get page(){return this.pageImpl}get selectedChild(){return this.selectedChildImpl}constructor(e,t,i,s,r){this.children=[],this.pageImpl=null,this.selectedChildImpl=null,this.onPathSelected=new F,this.onPathDeselected=new F,this.onSelected=new F,this.onDeselected=new F,this.onPageLoaded=new F,this.nextSelectedChild=null,this.pageManager=e,this.pageRef=t,this.title=i,this.parent=s,this.siblingOrder=r,null!==s&&(s.children.push(this),1===s.children.length&&(s.selectedChildImpl=this)),this.level=this.calculateLevel(),this.loadPageElementTask=new n(this.loadPageElement.bind(this)),this.loadPageStackTask=new n(this.loadPageStack.bind(this))}get defaultChild(){return this.children.length>0?this.children[0]:null}get readyToDisplay(){return!(null!==this.selectedChildImpl&&!this.selectedChildImpl.readyToDisplay)&&null!==this.pageImpl}get pathIsLoaded(){return this.selectedLeaf.loadPageStackTask.state===e.Succeeded}get pathFailedToLoad(){return this.selectedLeaf.loadPageStackTask.state===e.Failed}get isSelectedChild(){return null===this.parent||this.parent.selectedChild===this}get inSelectedPath(){return null===this.parent||this.parent.selectedChild===this&&this.parent.inSelectedPath}get root(){return null!==this.parent?this.parent.root:this}get selectedLeaf(){return null!==this.selectedChildImpl?this.selectedChildImpl.selectedLeaf:this}get selectedPath(){return function*(){let e=this;for(;null!==e;)yield e,e=e.selectedChildImpl}.bind(this)}present(e){this.page.present(e)}dispatchToList(e,t){for(let i of e)i[t].dispatch(i)}select(){if(this.inSelectedPath)return;let e={nodesDeselected:[],nodesSelected:[],nodesAddedToActivePath:[],nodesRemovedFromActivePath:[]},t=this,i=this;for(;null!==t.parent;)t.parent.nextSelectedChild=i,i=t.parent,t=t.parent;let n=!0;for(;null!==t&&null!==t.selectedChildImpl;){if(null===t.nextSelectedChild&&(t.nextSelectedChild=t.selectedChildImpl),t.selectedChildImpl!==t.nextSelectedChild){if(n){let i=t.selectedChildImpl;for(;null!==i;)e.nodesRemovedFromActivePath.push(i),i=i.selectedChildImpl}e.nodesDeselected.push(t.selectedChildImpl),e.nodesSelected.push(t.nextSelectedChild)}n&&t.selectedChildImpl===t.nextSelectedChild||e.nodesAddedToActivePath.push(t.nextSelectedChild),n=n&&t.selectedChildImpl===t.nextSelectedChild,t.selectedChildImpl=t.nextSelectedChild,t.nextSelectedChild=null,t=t.selectedChildImpl}this.dispatchToList(e.nodesDeselected,"onDeselected"),this.dispatchToList(e.nodesRemovedFromActivePath,"onPathDeselected"),this.dispatchToList(e.nodesSelected,"onSelected"),this.dispatchToList(e.nodesAddedToActivePath,"onPathSelected")}loadPageElement(){return de(this,void 0,void 0,(function*(){const e=document.location.origin+"/pages"+this.pageRef+".html";try{let i=yield function(e,i,n={}){return t(this,void 0,void 0,(function*(){n.timeout=void 0===n.timeout?1e4:n.timeout,n.request=void 0===n.request?new XMLHttpRequest:n.request,n.expectedCodes=void 0===n.expectedCodes?[200]:n.expectedCodes;let t=n.request;return new Promise(((s,r)=>{t.onload=function(){this.readyState==XMLHttpRequest.DONE&&(n.expectedCodes.includes(this.status)?s(t.response):r(new Error("The server did not respond with an expected code. The cose was: "+this.status)))},t.ontimeout=function(){r(new Error(`The server did not respond within the ${n.timeout/1e3} second timeout period.`))},t.onerror=function(e){r(new Error("The server could not be contacted. Status is "+t.status))},t.onabort=function(e){r(new Error("The XMLHttpRequest was aborted before it could complete."))},t.open(i,e,!0,n.username,n.password),t.timeout=n.timeout,t.send()}))}))}(e,"GET"),n=document.createElement("div");return n.innerHTML=i,n}catch(t){let i=new Error(`Attempted to load a page but no data was received from the server.\n\tURL = ${e}\n\tReason = ${t}`);throw console.warn(i),i}}))}ensurePathIsLoaded(){return this.selectedLeaf.ensureIsLoadedUpwards()}ensureIsLoadedUpwards(){return this.loadPageStackTask.run(!0)}loadPageStack(){var e,t;return de(this,void 0,void 0,(function*(){let i=null;null!==this.parent&&(i=this.parent.ensureIsLoadedUpwards());let n=this.loadPageElementTask.run(!0);null!==i&&(yield i);let s=null!==this.parent?this.parent.page.childPageContainer:this.pageManager.rootContainer;if(null===s){let i=new Error(`Failed to create the page for pageRef="${this.pageRef}" - The parent page has no element with class child-page-container.\nParent HTML:\n${null===(t=null===(e=this.parent)||void 0===e?void 0:e.page)||void 0===t?void 0:t.element.outerHTML}`);throw oe(re.Pages,"PageNode.loadPageStack",i),i}try{let e=yield n;this.pageImpl=yield this.createPage(s,e),this.onPageLoaded.dispatch(this)}catch(e){throw this.pageImpl=yield this.createPage(s,this.getErrorPage(e)),e}}))}getErrorPage(e){let t=document.createElement("div");return t.classList.add("page"),t.innerHTML=`\n            <div class="page-msg-error">\n                <h1>The page could not be loaded</h1>\n                <p>The website may be down or an unexpected error may have occurred. Try reloading the page or returning later.</p>\n                <expandable-div>\n                    <p slot="button">Expand error</p>\n                    <p>${e.message.replace(/\n/g,"<br>")}</p>\n                </expandable-div>\n            </div>\n        `,t}createPage(e,t){return de(this,void 0,void 0,(function*(){null!==this.pageImpl&&(this.pageImpl.remove(),this.pageImpl=null);let i=new he(t,this,this.getChildSwapFunction(),this.pageManager);return yield i.addToParent(e),i}))}calculateLevel(){let e=0,t=this.parent;for(;null!==t;)e++,t=t.parent;return e}getChildSwapFunction(){return this.pageManager.swapAnimations[Math.min(this.pageManager.swapAnimations.length-1,this.level)]}}class pe{get page_404(){return this.page_404Impl}get page_home(){return this.page_homeImpl}get root(){return this.rootImpl}constructor(e){if(this.pageNodes=new Map,this.loader=new ne,this.selectPageCounter=0,this.onNodeSelected=new F,this.page_404Impl=null,this.page_homeImpl=null,this.addons=new Set,this.swapAnimations=e,void 0===siteManifestJSON)throw'A variable named \'siteManifestJSON\' must be declared in the global scope and it must be of the following format:\n                {"/root": [\n                    {"<childPageRef>": [<children>]},\n                    {"<childPageRef>": [\n                        {"<childChildPageRef>": []},\n                    ]},\n                    etc.\n                ]}\n            ';let t=JSON.parse(siteManifestJSON);this.buildTree(null,t,0);let i=this.pageNodes.get("/root");if(void 0===i)throw"Failed to create the PageManager - there is no /root node in the parsed siteManifestJSON.";let n=document.querySelector(".site-pages-container");if(null===n)throw"Failed to create the PageManager - there is no element with class .site-pages-container.";this.rootContainer=n,this.rootImpl=i}buildTree(e,t,i){t.hasOwnProperty("pageRef")&&("string"==typeof t.pageRef||t.pageRef instanceof String)&&t.hasOwnProperty("children")&&t.children instanceof Array||console.error("Failed to parse manifest JSON. Expected an object of this format:\n\n            {pageRef: string, children: ManifestObj[]}\n\n            but got the following instead:\n\n            "+t);let n=new ue(this,t.pageRef,t.title,e,i);this.pageNodes.set(t.pageRef,n);for(let e=0;e<t.children.length;e++)this.buildTree(n,t.children[e],e)}getLowestSiblings(e,t){for(;e.level>t.level;)e=e.parent;for(;t.level>e.level;)t=t.parent;for(;;){if(e.parent===t.parent)return{inNode:e,outNode:t};e=e.parent,t=t.parent}}selectPage(e,t,i=null){return n=this,s=void 0,a=function*(){this.selectPageCounter++;let n=this.selectPageCounter,s=this.pageNodes.get(e);if(void 0===s){if(null===this.page_404Impl)return oe(re.PageSwapping,`PageManager.selectPage(pageRef="${e}", ...): no PageNode could be found for the specified pageRef and no 404 page was set.`),Promise.resolve(!1);s=this.page_404Impl}if(!s.inSelectedPath){let e=this.rootImpl.selectedLeaf;s.select();let t=this.getLowestSiblings(s,e);this.onNodeSelected.dispatch(t.inNode,t.outNode,i)}if(this.rootImpl.pathIsLoaded)return this.rootImpl.present(t),this.loader.hide(),Promise.resolve(!0);try{return this.loader.reveal(),yield s.ensurePathIsLoaded(),!0}catch(e){return!1}finally{n===this.selectPageCounter&&(this.rootImpl.readyToDisplay?(this.loader.hide(),this.rootImpl.present(t),this.rootImpl.page.isVisible||this.rootImpl.page.fadeIn()):(oe(re.PageSwapping,`PageManager.selectPage(pageRef = ${e}, ...) - Failed to load the path. Nothing else to do.`),this.loader.hide()))}},new((r=void 0)||(r=Promise))((function(e,t){function i(e){try{l(a.next(e))}catch(e){t(e)}}function o(e){try{l(a.throw(e))}catch(e){t(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(i,o)}l((a=a.apply(n,s||[])).next())}));var n,s,r,a}registerPageAddon(e){this.addons.has(e)&&console.warn("An addon is being added twice (this does nothing). Addon name: "+e.name),this.addons.add(e)}setHomePage(e){let t=this.pageNodes.get(e);void 0!==t?(this.page_homeImpl=t,this.pageNodes.set("/",t)):console.error(`Page ${e} was set as the home page, but there is no such page listed in the manifest.`)}set404Page(e){let t=this.pageNodes.get(e);void 0!==t?this.page_404Impl=t:console.error(`Page ${e} was set as the home page, but there is no such page listed in the manifest.`)}}class ge extends K{constructor(e,t=!0){super(t),this.point=e}set(e,t){let i="translate3d("+-this.point[0]+"px,"+-this.point[1]+"px,"+-this.point[2]+"px)",n="rotate3d(0,1,0,"+t+"rad)",s="translate3d("+this.point.join("px,")+"px)";e.style.transform=s+n+i}getCleanupInternal(){return[new N("transform","",!0)]}}class me extends K{constructor(e=null,t="px",i=!0){super(i),this.postfix=t,this.currentFirst=e}set(e,t){let i="translate3d("+t.join(this.postfix+",")+"px)";null===this.currentFirst?e.style.transform=i:this.currentFirst?e.style.transform=e.style.transform+i:e.style.transform=i+e.style.transform}getCleanupInternal(){return[new N("transform","",!0)]}}function fe({element:e,outNotIn:t,rightNotLeft:i,duration:n=500,interpolator:s=E,setPerspectiveOrigin:r=!0}){return function({element:e,hideWhenDone:t,rightNotLeft:i,duration:n,interpolator:s,setPerspectiveOrigin:r}){let a=new W({element:e,preStates:M(new N("backface-visibility","hidden"),new N("transform-style","preserve-3d"),r?[new O("perspective-origin","center top")]:[],new q("hidden",!1)),postStates:M(t?[new q("hidden",!0)]:[],new N("backface-visibility",""),new N("transform-style",""),new O("perspective",""),r?[new O("perspective-origin","")]:[])});return a.postSetup.add((()=>{let r=f(e,(function(){return e.clientWidth})),o=1.5*r;a.addAdditionalPreStates(new O("perspective",o+"px"));let l=function(e,t,i){return Math.atan(.5*i/t)}(0,o,r),h=Math.PI/2-l,d=t?0:h,c=t?h:0;i||(d=-d,c=-c);let u=r/2*Math.tan((Math.PI+2*l)/4),p=new ge([0,0,-u]);a.addChannels(new z([new $(0,d),new $(n,c)],p,s),new z([new $(t?n/2:0,t?1:0),new $(n/2,t?0:1)],Z,s),new z([new $(0,[0,0,0]),new $(n/3,[0,0,-r]),new $(n/3,[0,0,-r]),new $(n/3,[0,0,0])],new me(!1),D))})),a.name="rotate",a}({element:e,hideWhenDone:t,rightNotLeft:i,duration:n,interpolator:s,setPerspectiveOrigin:r}).queueAnimation()}class we extends K{constructor(e,t=!0){super(t),this.pixelsFromTop=e}set(e){let t=e.getBoundingClientRect(),i=t.top<0?-t.top:0;i=U(i,0,t.height);let n=i+this.pixelsFromTop;n=U(n,0,t.height);let s=n/t.height*100+"%";e.style.perspectiveOrigin="center "+s}getCleanupInternal(){return[new N("perspectiveOrigin","",!0)]}}const ve=OverlayScrollbars(document.body,{}),ye=1500,be=500;function Pe(e){ve.scroll({y:0},U(ve.scroll().position.y,0,e))}const Se=[function(e,t){Pe(be);let i=null!==t&&t.order>e.order;return function(e,t,i=500){(function(e,t,i){let n=new W({element:e,animationChannels:[new z([new $(0,void 0),new $(i,void 0)],new we(t),k)]});return n.name="keepPerspectiveOrigin",n})(e,t,i).queueAnimation()}(e.parent.childPageContainer,.125*window.innerHeight,ye),{inAnimation:fe({element:e.element,outNotIn:!1,rightNotLeft:!i,duration:ye,setPerspectiveOrigin:!1}),outAnimation:fe({element:t.element,outNotIn:!0,rightNotLeft:i,duration:ye,setPerspectiveOrigin:!1})}},function(e,t){Pe(be);let i=null!==t&&t.order>e.order;return{inAnimation:ee({element:e.element,start:[i?-100:100,0,0],end:[0,0,0],valueInterpolator:D,timeInterpolator:E,setter:new me(null,"%"),duration:be,preStates:[new q("hidden",!1)]}),outAnimation:ee({element:t.element,start:[0,0,0],end:[i?100:-100,0,0],valueInterpolator:D,timeInterpolator:E,setter:new me(null,"%"),duration:be,postStates:[new q("hidden",!0)]})}}];function Ie(e,t,i){let n=e.querySelector(t);if(null===n)throw new Error(`Failed to create element${void 0!==i?" "+i:""}; the shadow root has no ${t} element (code bug, this should not be possible).`);return n}let Te=document.createElement("template");Te.innerHTML='\n    <style>\n        .hidden{\n            display: none;\n        }\n        #content{\n            overflow: hidden;\n        }\n        #button{\n            cursor: pointer;\n        }\n    </style>\n    <div id="wrapper">\n        <div id="button">\n            <slot name="button">Reveal</slot>\n        </div>\n        <div id="content" class="hidden">\n            <slot></slot>\n        </div>\n    </div>\n';class Ce extends HTMLElement{constructor(){super();let e=this.attachShadow({mode:"open"});e.appendChild(Te.content.cloneNode(!0)),this.content=Ie(e,"#content","expandable-div"),this.button=Ie(e,"#button","expandable-div"),this.button.addEventListener("click",(()=>{!function(e,t=500,i=E){let n=V.getTickingAnimation(e);null===n||"slideUp"!==n.name&&"slideDown"!=n.name?0===e.offsetHeight?Q(e,t,i).queueAnimation():Y(e,t,i).queueAnimation():n.reverse()}(this.content)}))}}let xe=document.createElement("template");xe.innerHTML='\n  <style>\n    .hidden{\n        display: none;\n    }\n    img{\n        display: block;\n        width: 100%;\n        transition: filter 0.5s ease-in-out;\n    }\n    /*img:hover{\n        filter: brightness(0.85) blur(1px);\n    }\n    #wrapper:hover{\n        animation: scale-bounce 250ms ease;\n    }\n    @keyframes scale-bounce {\n        0% {\n            transform: scale(1);\n        }\n        50% {\n            transform: scale(1.025);\n        }\n        100% {\n            transform: scale(1);\n        }\n    }\n    */\n    #wrapper{\n        position: relative;\n        cursor: pointer; \n    }\n    :host(:not([fullscreen-text])) #wrapper:hover::after{\n        opacity: .5;\n    }\n\n    :host([fullscreen-text]) #wrapper::after{\n        content: "Fullscreen";\n        pointer-events: none;\n        width: 100%;\n        position: absolute;\n        bottom: 0.66em;\n        left: 0;\n        opacity: 0;\n        color: white;\n        font-size: 24px;\n        text-align: center;\n        filter: drop-shadow(1px 1px 1px black) drop-shadow(0px 0px 2px black);\n        transition: opacity 0.25s ease-in-out;\n    }\n\n  </style>\n\n  <div id="wrapper">\n    <img>\n  </div>\n';class ke extends HTMLElement{constructor(){super();let e=this.attachShadow({mode:"open"});e.appendChild(xe.content.cloneNode(!0)),this.image=Ie(e,"img","expandable-img"),this.image.onclick=e=>{0===e.button&&this.open()}}static get observedAttributes(){return["src","alt"]}attributeChangedCallback(e,t,i){switch(e){case"src":null!==i&&i.length>0?this.image.src=i:this.image.removeAttribute("src");break;case"alt":null!==i?this.image.alt=i:this.image.removeAttribute("alt")}}open(){let e=this.getAttribute("bigSrc");if(null===e&&(e=this.getAttribute("src")),null!==e){let t=document.createElement("fullscreen-img");t.setAttribute("src",e),document.body.appendChild(t)}else console.error("A expandable-img was full-screened, but it doesn't have a src attribute.")}}let Le=document.createElement("template");Le.innerHTML='\n  <style>\n    #wrapper{\n        position: relative;\n        width: 100%;\n        height: 100%;\n        opacity: 33%;\n        filter: drop-shadow(1px 1px 1px black) drop-shadow(0px 0px 2px black);\n        --main-bg-color: white;\n        cursor: pointer; \n    }\n    #wrapper:hover{\n        opacity: 100%;\n        animation: scale-bounce 250ms ease;\n    }\n    @keyframes scale-bounce {\n        0% {\n            transform: scale(1);\n        }\n        50% {\n            transform: scale(1.25);\n        }\n        100% {\n            transform: scale(1);\n        }\n    }\n    #wrapper div{\n        position: absolute;\n        width: 33.33%;\n        height: 33.33%;\n        box-sizing: border-box;\n    }\n    #tl, #tr{\n        top: 0;\n        border-top: 2px solid var(--main-bg-color);\n    }\n    #tr, #br{\n        right: 0;\n        border-right: 2px solid var(--main-bg-color);\n    }\n    #bl, #br{\n        bottom: 0;\n        border-bottom: 2px solid var(--main-bg-color);\n    }\n    #tl, #bl{\n        left: 0;\n        border-left: 2px solid var(--main-bg-color);\n    }\n  </style>\n\n  <div id="wrapper" title="Fullscreen">\n    <div id="tl"></div>\n    <div id="tr"></div>\n    <div id="bl"></div>\n    <div id="br"></div>\n  </div>\n';class Ee extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}).appendChild(Le.content.cloneNode(!0))}}let Ae,De=document.createElement("template");De.innerHTML='\n  <style>\n    #wrapper{\n        position: fixed;\n        width: 100vw;\n        height: 100vh;\n        top: 0;\n        left: 0;\n        z-index: 1000000000;\n        background: rgb(0, 0, 0, 0.33);\n        box-sizing: border-box;\n        display: flex;\n        opacity: 0;\n        transition: opacity 500ms ease-in-out;\n    }\n    #wrapper.visible{\n        opacity: 1;\n    }\n    img{\n        display: block;\n        max-width: 100%;\n        max-height: 100%;\n        margin: auto;\n        transform: scale(0);\n        transition: transform 500ms ease-in-out;\n    }\n\n    img.visible{\n        transform: scale(1);\n    }\n\n    @media only screen and (min-width: 576px) {\n        #wrapper{\n            padding: 2em;\n        }\n    }\n    x-button{\n        width: 40px;\n        height: 40px;\n        position: absolute;\n        right: 50px;\n        top: 50px;\n    }\n  </style>\n\n  <div id="wrapper">\n    <img>\n    <x-button></x-button>\n  </div>\n';class Me extends HTMLElement{constructor(){super(),this.closing=!1;let e=this.attachShadow({mode:"open"});e.appendChild(De.content.cloneNode(!0)),this.wrapper=Ie(e,"#wrapper","fullscreen-img"),this.image=Ie(e,"img","fullscreen-img"),this.closeButton=Ie(e,"x-button","fullscreen-img"),this.closeButton.onclick=e=>{0===e.button&&(this.close(),e.stopPropagation())},this.image.onmouseup=e=>{0===e.button&&e.stopPropagation()},this.wrapper.onmouseup=e=>{0===e.button&&this.close()},this.escapeListener=e=>{"Escape"===e.key&&this.close()},document.addEventListener("keyup",this.escapeListener),this.downUpListener=e=>{"ArrowUp"!==e.key&&"ArrowDown"!==e.key||e.preventDefault()},document.addEventListener("keydown",this.downUpListener),this.wrapper.ontouchmove=e=>{e.preventDefault()},this.wrapper.onwheel=e=>{e.preventDefault()},requestAnimationFrame((()=>{this.wrapper.classList.add("visible"),this.image.classList.add("visible")}))}disconnectedCallback(){document.removeEventListener("keyup",this.escapeListener)}close(){this.wrapper.classList.remove("visible"),this.image.classList.remove("visible"),this.closing=!0,setTimeout((()=>{this.remove()}),550)}static get observedAttributes(){return["src","alt"]}attributeChangedCallback(e,t,i){switch(e){case"src":null!==i&&i.length>0?this.image.src=i:this.image.removeAttribute("src");break;case"alt":null!==i?this.image.alt=i:this.image.removeAttribute("alt")}}}class Re extends HTMLElement{constructor(){super();let e=this.getAttribute("pageRef");if(null===e)throw new Error("Failed to create page-link element; no pageRef attribute was provided.");this.animateSwap=!this.hasAttribute("instant"),this.pageRef=e,this.addEventListener("click",(()=>{Ae.selectPage(this.pageRef,this.animateSwap,this)}))}}let He=document.createElement("template");He.innerHTML='\n  <style>\n    #wrapper{\n        position: relative;\n        width: 100%;\n        height: 100%;\n        opacity: 33%;\n        filter: drop-shadow(1px 1px 1px black) drop-shadow(0px 0px 2px black);\n        --main-bg-color: white;\n        cursor: pointer; \n    }\n    #wrapper:hover{\n        opacity: 100%;\n        animation: scale-bounce 250ms ease;\n    }\n    @keyframes scale-bounce {\n        0% {\n            transform: scale(1);\n        }\n        50% {\n            transform: scale(1.25);\n        }\n        100% {\n            transform: scale(1);\n        }\n    }\n    #wrapper div{\n        position: absolute;\n        width: 2px;\n        height: 141.42%;\n        top: -20.71%;\n        left: calc(50% - 1px);\n        background-color: white;\n    }\n    #tl-br{\n        transform: rotate(-45deg);\n    }\n    #bl-tr{\n        transform: rotate(45deg);\n    }\n  </style>\n\n  <div id="wrapper" title="Close">\n    <div id="tl-br"></div>\n    <div id="bl-tr"></div>\n  </div>\n';class Ne extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}).appendChild(He.content.cloneNode(!0))}}class Oe{get unlocked(){return this.unlockedImpl}constructor(e,t=1e6){this.paramQueue=new B,this.unlockedImpl=!1,this.func=e,this.queueLimit=t}callOrQueue(...e){this.unlockedImpl?this.func.apply(null,e):(this.paramQueue.size+1>this.queueLimit&&this.paramQueue.popFront(),this.paramQueue.pushBack(e))}unlock(){this.unlockedImpl=!0;for(let e of this.paramQueue)this.func.apply(null,e)}}let qe=document.createElement("template");qe.innerHTML='\n  <style>\n    #wrapper{\n        position: relative;\n        padding-bottom: calc(var(--aspect-ratio, .5625) * 100%); /* 16:9 */\n        height: 0;\n        width: 100%;\n    }\n    #wrapper iframe {\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n    }\n  </style>\n\n  <div id="wrapper">\n    <div id="player"></div>\n  </div>\n';class Be extends HTMLElement{get isReady(){return this.isReadyAwaitable.promise}constructor(){super(),this.isReadyAwaitable=i(),this.player=null;let e=this.attachShadow({mode:"open"});e.appendChild(qe.content.cloneNode(!0)),this.wrapper=Ie(e,"#wrapper","youtube-video");let t=Ie(e,"#player","youtube-video");Fe.then((()=>{new YT.Player(t,{events:{onReady:e=>{this.player=e.target,this.isReadyAwaitable.resolve(),this.videoIdSetter.unlock()},onError:e=>{this.isReadyAwaitable.reject(e.data.toString())}}})})),this.videoIdSetter=new Oe((e=>{null!==e&&e.length>0?this.player.cueVideoById(e):this.player.stopVideo()}),1)}static get observedAttributes(){return["video-id","aspect-ratio"]}attributeChangedCallback(e,t,i){switch(e){case"video-id":this.videoIdSetter.callOrQueue(i);break;case"aspect-ratio":let e=null===i?NaN:1/Number.parseFloat(i);isNaN(e)||this.wrapper.style.setProperty("--aspect-ratio",e.toString())}}}var Ve,Fe,We,Ue;class ze{constructor(e){this.maxBufferSize=100,this.buffer=new B,this.handler=e}removeLast(){this.handler.remove(this.buffer.popBack().value)}addValue(e,t){this.buffer.size>this.maxBufferSize&&this.removeLast(),this.buffer.pushFront({value:e,age:t}),this.handler.add(e)}getAgeDelta(){let e=this.buffer.peekFront(),t=this.buffer.peekBack();return void 0!==e&&void 0!==t?e.age-t.age:0}size(){return this.buffer.size}getValue(e){for(;this.buffer.size>0&&this.buffer.peekBack().age<e;)this.removeLast();return this.handler.getValue()}}class $e{constructor(){this.sumOfValues=[0,0]}reset(){this.sumOfValues=[0,0]}add(e){this.sumOfValues=o(this.sumOfValues,e)}remove(e){this.sumOfValues=a(this.sumOfValues,e)}getValue(){return this.sumOfValues}}!function(e){e[e.MOUSE=0]="MOUSE",e[e.TOUCH=1]="TOUCH"}(We||(We={})),function(e){e[e.top=1]="top",e[e.left=2]="left",e[e.bottom=4]="bottom",e[e.right=8]="right",e[e.x=10]="x",e[e.y=5]="y"}(Ue||(Ue={}));class Ke{constructor(){this.onMove=new F,this.onEnd=new F,this.onDragStart=new F,this.onDrag=new F,this.onDragEnd=new F,this.onClick=new F,this.onHold=new F}set velocityTimeSpan(e){this.velocityTimeSpanImpl=e}get velocityTimeSpan(){return this.velocityTimeSpanImpl}}class _e extends Ke{constructor(){super(...arguments),this.velocityTimeSpanImpl=100,this.draggingAllowed=!1,this.draggingDisablesClicks=!0,this.dragThreshold=[0,0],this.dragTimeThreshold=0,this.onHoldDisablesClicks=!0,this.onHoldDelay=0}set velocityTimeSpan(e){e<10&&(e=10),this.velocityTimeSpanImpl=e}get velocityTimeSpan(){return this.velocityTimeSpanImpl}}function Qe(e,t){return void 0!==t.velocityTimeSpan&&(e.velocityTimeSpan=t.velocityTimeSpan),e.onMove.addAll(t.onMove),e.onEnd.addAll(t.onEnd),void 0!==t.draggingAllowed&&(e.draggingAllowed=t.draggingAllowed),void 0!==t.draggingDisablesClicks&&(e.draggingDisablesClicks=t.draggingDisablesClicks),void 0!==t.dragThreshold&&(e.dragThreshold=t.dragThreshold),void 0!==t.dragTimeThreshold&&(e.dragTimeThreshold=t.dragTimeThreshold),e.onDragStart.addAll(t.onDragStart),e.onDrag.addAll(t.onDrag),e.onDragEnd.addAll(t.onDragEnd),e.onClick.addAll(t.onClick),e.onHold.addAll(t.onHold),void 0!==t.onHoldDisablesClicks&&(e.onHoldDisablesClicks=t.onHoldDisablesClicks),void 0!==t.onHoldDelay&&(e.onHoldDelay=t.onHoldDelay),e}class Ye extends _e{get currentPositionScreen(){return[this.currentData.screenX,this.currentData.screenY]}get currentPositionPage(){return[this.currentData.pageX,this.currentData.pageY]}get deltaPositionTotal(){return a(this.currentPosition,this.startPosition)}constructor(e,t){super(),this.deltaPosition=[0,0],this.currentVelocity=[0,0],this.type=e,this.startData=t,this.currentData=t,this.startPosition=[t.clientX,t.clientY],this.currentPosition=this.startPosition,this.startTimestamp=performance.now(),this.currentTimestamp=this.startTimestamp}}class je extends Ye{constructor(e,t,i){super(e,t),this.sumOfMovements=new ze(new $e),this.isDragging=!1,this.onHoldTimeoutHandle=null,this.onHoldCalled=!1,this.startTarget=i,this.sumOfMovements.addValue(this.deltaPosition,window.performance.now())}canClick(){return(!this.isDragging||!this.draggingDisablesClicks)&&function(e,t){let i=t;for(;null!=i;){if(i==e)return!0;i=i.parentNode}return!1}(this.startTarget,this.currentData.target)&&m(this.currentPosition,this.startTarget)}cancelOnHold(){null!==this.onHoldTimeoutHandle&&(clearTimeout(this.onHoldTimeoutHandle),this.onHoldTimeoutHandle=null)}registerOnHold(){this.onHoldDelay>0&&(this.onHoldTimeoutHandle=setTimeout((()=>{this.canClick()&&(this.onHold.dispatch(this),this.onHoldCalled=!0)}),this.onHoldDelay))}handleNewPosition(e){this.currentData=e;let t=[e.clientX,e.clientY];this.deltaPosition=a(t,this.currentPosition),this.currentPosition=t,this.currentTimestamp=performance.now(),this.sumOfMovements.addValue(this.deltaPosition,this.currentTimestamp);let i=this.sumOfMovements.getValue(this.currentTimestamp-this.velocityTimeSpan),n=this.sumOfMovements.getAgeDelta();n<=0&&(n=this.velocityTimeSpan),this.currentVelocity=d(i,c(n))}determineSide(e){return this.dragThreshold[0]>0&&this.dragThreshold[1]>0?Math.abs(e[0]/e[1])>Math.abs(this.dragThreshold[0]/this.dragThreshold[1])?e[0]>0?Ue.right:Ue.left:e[1]>0?Ue.bottom:Ue.top:Math.abs(e[0])>Math.abs(e[1])?e[0]>0?Ue.right:Ue.left:e[1]>0?Ue.bottom:Ue.top}isOutsideDragThreshold(e){return e[0]>=this.dragThreshold[0]||e[0]<=-this.dragThreshold[0]||e[1]>=this.dragThreshold[1]||e[1]<=-this.dragThreshold[1]}handleMove(e,t){if(this.handleNewPosition(e),this.onMove.dispatch(this,t),this.draggingAllowed){if(!this.isDragging){let e=!0;if(this.dragTimeThreshold>0&&(e=this.currentTimestamp<=this.startTimestamp+this.dragTimeThreshold),this.isOutsideDragThreshold(this.deltaPositionTotal)||(e=!1),e){let e=this.determineSide(this.deltaPositionTotal);this.isDragging=!0,this.onDragStart.dispatch(this,e,t)}}this.isDragging&&this.onDrag.dispatch(this,t)}}handleEnd(e,t,i){this.handleNewPosition(e),this.isDragging&&this.onDragEnd.dispatch(this,t,i),i||this.onHoldCalled&&this.onHoldDisablesClicks||this.canClick()&&this.onClick.dispatch(this,t),this.onEnd.dispatch(this,t,i)}}function Xe(){return{point:new Ke,touch:new Ke,mouse:new Ke}}new Map;class Je{constructor(e,{defaultBehavior:t=Xe(),trackMoveEvents:i=!1,trackTouchInput:n=!0,trackMouseInput:s=!0}){this.touchPoints=new Map,this.mousePoint=null,this.onStart=new F,this.target=e,this.trackingMove=i,this.trackingTouch=n,this.trackingMouse=s,this.mouseMoveHandler=this.handleMouseMove.bind(this),this.defaultPointBehavior=Qe(new Ke,t.point),this.defaultMouseBehavior=Qe(new Ke,t.mouse),this.defaultTouchBehavior=Qe(new Ke,t.touch),n&&(e.addEventListener("touchstart",this.handleTouchStart.bind(this)),i&&e.addEventListener("touchmove",this.handleTouchMove.bind(this)),e.addEventListener("touchend",this.handleTouchEnd.bind(this)),e.addEventListener("touchcancel",this.handleTouchCancel.bind(this))),s&&(e.addEventListener("mousedown",this.handleMouseDown.bind(this)),document.addEventListener("mouseup",this.handleMouseUp.bind(this)))}handleMouseDown(e){let t=e;0==t.button&&(this.trackingMove&&document.addEventListener("mousemove",this.mouseMoveHandler),null!==this.mousePoint&&(this.mousePoint.handleEnd(t,e,!0),this.mousePoint=null),this.mousePoint=new je(We.MOUSE,t,this.target),Qe(this.mousePoint,this.defaultPointBehavior),Qe(this.mousePoint,this.defaultMouseBehavior),this.onStart.dispatch(this.mousePoint,t),this.mousePoint.registerOnHold())}handleMouseMove(e){if(null!==this.mousePoint){let t=e;this.mousePoint.handleMove(t,e)}}handleMouseUp(e){if(0==e.button&&(this.trackingMove&&document.removeEventListener("mousemove",this.mouseMoveHandler),null!==this.mousePoint)){let t=e;this.mousePoint.handleEnd(t,e,!1),this.mousePoint=null}}handleTouchStart(e){let t=e;for(let e=0;e<t.changedTouches.length;e++){let i=t.changedTouches[e],n=new je(We.TOUCH,i,this.target);m([i.clientX,i.clientY],this.target)&&(Qe(n,this.defaultPointBehavior),Qe(n,this.defaultTouchBehavior),this.touchPoints.set(i.identifier,n),this.onStart.dispatch(n,t),n.registerOnHold())}}handleTouchMove(e){let t=e;for(let e=0;e<t.changedTouches.length;e++){let i=t.changedTouches[e],n=this.touchPoints.get(i.identifier);void 0!==n&&n.handleMove(i,t)}}handleTouchEndOrCancel(e,t){let i=e;for(let e=0;e<i.changedTouches.length;e++){let n=i.changedTouches[e],s=this.touchPoints.get(n.identifier);this.touchPoints.delete(n.identifier),void 0!==s&&s.handleEnd(n,i,t)}}handleTouchEnd(e){this.handleTouchEndOrCancel(e,!1)}handleTouchCancel(e){this.handleTouchEndOrCancel(e,!0)}}class Ge{get startTime(){return this.startTimeImpl}get endTime(){return this.startTime+this.lifespan}constructor(e=500){this.startTimeImpl=0,this.startPosition=[0,0],this.startVelocity=[0,0],this.lifespan=e}start(e,t=[0,0],i=performance.now()){this.startPosition=e,this.startVelocity=t,this.startTimeImpl=i,this.init()}init(){}}class Ze extends Ge{constructor(e,t=500,i=E){super(t),this.destination=e,this.interpolator=i}getPosition(e=performance.now()){let t=U(A(this.startTime,this.endTime,e),0,1);return p(this.startPosition,this.destination,this.interpolator(0,1,t))}}class et extends Ge{constructor(){super(...arguments),this.acceleration=[0,0]}init(){var e;this.acceleration=d([-(e=this.startVelocity)[0],-e[1]],c(this.lifespan))}getPosition(e){let t=e-this.startTime;return s(this.startPosition,this.startVelocity,this.acceleration,t)}}class tt extends Ge{constructor(e=null,t=500){super(t),this.acceleration=[0,0],this.destination=e}init(){null===this.destination&&(this.destination=this.startPosition),this.acceleration=l(c(2/(this.lifespan*this.lifespan)),function(e,...t){let i=[e[0],e[1]];for(let e=0;e<t.length;e++)i[0]-=t[e][0],i[1]-=t[e][1];return i}(this.destination,this.startPosition,l(this.startVelocity,c(this.lifespan))))}getPosition(e){let t=e-this.startTime;return s(this.startPosition,this.startVelocity,this.acceleration,t)}}class it extends tt{constructor(e,t,i=500){super(null,i),this.testEffect=e,this.getDestination=t}init(){this.testEffect.start(this.startPosition,this.startVelocity,this.startTime),this.destination=this.getDestination(this.testEffect.getPosition(this.testEffect.endTime)),super.init()}}class nt{constructor(e){this.clampVector=[0,1],this.clampVector=e}restrict(e){var t,i;return e=r(e,this.clampVector)>0?function(e,t){let i=t*t;return r(e,e)>i?l(function(e){return d(e,c(u(e)))}(e),c(t)):e}((t=e,l(i=this.clampVector,c(r(t,i)/r(i,i)))),u(this.clampVector)):[0,0]}}class st{restrict(e){return e}}class rt{get isUserDragging(){return null!==this.draggingPt}get isAutoDragging(){return null!==this.currentDragEffect}constructor(e,t=new st,i=null,n=[0,0]){this.currentDrag=[0,0],this.previousDragEndPosition=[0,0],this.animationHandle=null,this.currentDragEffect=null,this.draggingPt=null,this.onDragStart=null,this.onDragDone=null,this.onDragEffectDone=null,this.dragSideMask=Ue.x,this.onNewPosition=rt.defaultNewPositionHandler,this.elementToDrag=e,this.dragRestrictionImpl=t,this.postDragBehavior=i,this.translationOffset=n,this.currentDrag=this.dragRestrictionImpl.restrict([0,0]),this.previousDragEndPosition=this.dragRestrictionImpl.restrict([0,0])}watch(e){e.draggingAllowed=!0,e.onDragStart.add(this.handleDragStart,this)}moveTo(e,t=500){t<=0?(this.setDragPosition(e),this.setAutoDragEffect(null)):this.setAutoDragEffect(new Ze(e,t))}get currentDragPosition(){return this.currentDrag}get dragRestriction(){return this.dragRestrictionImpl}set dragRestriction(e){this.dragRestrictionImpl=e,this.setDragPosition(this.currentDrag)}set offset(e){this.translationOffset=e,this.setDragPosition(this.currentDrag)}setAutoDragEffect(e,t=[0,0]){null!==e?null===this.draggingPt&&(this.currentDragEffect=e,b(this.elementToDrag),this.previousDragEndPosition=this.currentDrag,e.start(this.currentDrag,t),null===this.animationHandle&&this.queueAnimationFrame()):this.currentDragEffect=null}setDragPosition(e){this.currentDrag=this.dragRestrictionImpl.restrict(e),this.onNewPosition(this.elementToDrag,o(this.currentDrag,this.translationOffset))}queueAnimationFrame(){this.animationHandle=requestAnimationFrame(this.handleEffectUpdate.bind(this))}handleEffectUpdate(){if(null===this.currentDragEffect)return void this.dragEffectDone(!0);let e=performance.now(),t=this.currentDragEffect.endTime;e>t&&(e=t),this.setDragPosition(this.currentDragEffect.getPosition(e)),e===t?this.dragEffectDone(!1):this.queueAnimationFrame()}dragEffectDone(e){this.animationHandle=null,this.currentDragEffect=null,null===this.draggingPt&&P(this.elementToDrag),null!==this.onDragEffectDone&&this.onDragEffectDone(this.currentDrag,e)}handleDragStart(e,t,i){t&this.dragSideMask&&null===this.draggingPt&&(this.draggingPt=e,null!==this.onDragStart&&this.onDragStart(),e.onDrag.add(this.handleDragMove,this),e.onDragEnd.add(this.handleDragEnd,this),b(this.elementToDrag),this.previousDragEndPosition=this.currentDrag,this.setAutoDragEffect(null))}handleDragMove(e){this.setDragPosition(o(e.deltaPositionTotal,this.previousDragEndPosition))}handleDragEnd(e,t,i){this.draggingPt=null,null!==this.onDragDone&&this.onDragDone(this.currentDrag,e.currentVelocity),null===this.currentDragEffect&&null!==this.postDragBehavior&&this.setAutoDragEffect(this.postDragBehavior,e.currentVelocity),null===this.currentDragEffect&&P(this.elementToDrag)}}rt.defaultNewPositionHandler=function(e,t){e.style.transform="translate("+t[0]+"px, "+t[1]+"px)"};const at=.66;class ot{get dragSpaceCenter(){return.5*(this.dragSpaceLeft+this.dragSpaceRight)}get screenSpaceWidth(){return this.element.offsetWidth}get halfScreenSpaceWidth(){return.5*this.element.offsetWidth}get screenSpaceHeight(){return this.element.offsetHeight}constructor(e){this.dragSpaceLeft=0,this.dragSpaceRight=0,this.element=e;let t=e.getAttribute("pageRef");if(null===t)throw"There is no pageRef attribute on element "+e;this.pageRef=t}}class lt{get widestItemWidth(){return this.widestItemWidthImpl}get tallestItemHeight(){return this.tallestItemHeightImpl}get dragSpaceWidth(){return this.dragSpaceWidthImpl}get itemDragWidth(){return this.itemDragWidthImpl}constructor(e){this.widestItemWidthImpl=0,this.tallestItemHeightImpl=0,this.dragSpaceWidthImpl=0,this.itemDragWidthImpl=0,this.items=e}update(){if(0===this.items.length)return;this.widestItemWidthImpl=0,this.tallestItemHeightImpl=0;let e=-this.items[0].screenSpaceWidth/2;this.items.forEach((t=>{this.widestItemWidthImpl=Math.max(this.widestItemWidthImpl,t.screenSpaceWidth),this.tallestItemHeightImpl=Math.max(this.tallestItemHeightImpl,t.screenSpaceHeight),e+=t.screenSpaceWidth}),this),this.dragSpaceWidthImpl=e-this.items[this.items.length-1].screenSpaceWidth/2,this.itemDragWidthImpl=this.dragSpaceWidthImpl/(this.items.length-1);let t=this.itemDragWidthImpl/2;for(let e=0;e<this.items.length;e++){let i=this.items[e];i.dragSpaceLeft=e*this.itemDragWidthImpl-t,i.dragSpaceRight=e*this.itemDragWidthImpl+t}}getCenterItemData(e){let t=.5*this.itemDragWidthImpl,i=U(Math.trunc(e/t),0,2*this.items.length-3),n=i%2==1,s=Math.trunc((i+1)/2);return{itemLeftOfDragCenterIndex:n?s-1:s,dragCenterPercentToRightItem:(e-i*t)/this.itemDragWidth+(n?.5:0)}}}var ht;!function(e){e[e.TopRight=0]="TopRight",e[e.BottomRight=1]="BottomRight",e[e.TopLeft=2]="TopLeft",e[e.BottomLeft=3]="BottomLeft",e[e.TopMiddle=4]="TopMiddle",e[e.BottomMiddle=5]="BottomMiddle"}(ht||(ht={}));class dt{constructor(){this.screenOffset=[0,0],this.scale=0,this.origin=ht.TopMiddle,this.zIndex=0}getScaledOffset(e){let t=[e.screenSpaceWidth,e.screenSpaceHeight];switch(this.origin){case ht.TopRight:{let e=h(t,this.scale),i=h(a(t,e),.5);return[i[0]-t[0]+this.screenOffset[0],this.screenOffset[1]-i[1]]}case ht.BottomRight:{let e=h(t,this.scale),i=h(a(t,e),.5);return o(a(i,t),this.screenOffset)}case ht.TopLeft:{let e=h(t,this.scale),i=h(a(t,e),.5);return a(this.screenOffset,i)}case ht.BottomLeft:{let e=h(t,this.scale),i=h(a(t,e),.5);return[this.screenOffset[0]-i[0],i[1]-t[1]+this.screenOffset[1]]}case ht.TopMiddle:{let e=.5*t[0],i=.5*(t[1]-t[1]*this.scale);return a(this.screenOffset,[e,i])}case ht.BottomMiddle:{let e=.5*t[0],i=.5*(t[1]-t[1]*this.scale);return a(this.screenOffset,[e,t[1]-i])}}}}class ct{get centerRegionIndex(){return this.centerRegionIndexImpl}constructor(e,t,i){this.container=e,this.itemManager=t,this.invertY=i,this.regionTargetPoints=new Array(2*t.items.length-1),this.centerRegionIndexImpl=t.items.length-1;let n=t.items.length<=2;for(let e=0;e<this.regionTargetPoints.length;e++){let s=new dt;this.regionTargetPoints[e]=s,e<this.centerRegionIndexImpl?(s.origin=i?ht.TopRight:ht.BottomRight,s.scale=n?at:L(.33,at,A(0,this.centerRegionIndex-1,e)),s.zIndex=e):e===this.centerRegionIndexImpl?(s.origin=i?ht.BottomMiddle:ht.TopMiddle,s.scale=1,s.zIndex=e):(s.origin=i?ht.TopLeft:ht.BottomLeft,s.scale=n?at:L(at,.33,A(t.items.length,this.regionTargetPoints.length-1,e)),s.zIndex=this.regionTargetPoints.length-1-e)}}generateRegionTargetPoints(e,t){let i=[this.container.clientWidth,this.container.clientHeight],n=l(i,[.5,.5]),s=this.itemManager.tallestItemHeight*at,r=(this.container.clientHeight-s)/Math.max(this.itemManager.items.length-1,2),a=.5*e,o=[(n[0]-a)/(this.itemManager.items.length-1),i[1]],h=[n[0]-a,s+r];if(this.itemManager.items.length<=2)this.regionTargetPoints[0].screenOffset=h;else{let e=0;for(let t=0;t<this.itemManager.items.length-2;t++)e+=this.regionTargetPoints[t].scale;let t=0;for(let i=0;i<this.itemManager.items.length-1;i++)this.regionTargetPoints[i].screenOffset=p(o,h,t/e),t+=this.regionTargetPoints[i].scale}this.regionTargetPoints[this.itemManager.items.length-1].screenOffset=[n[0],0];for(let e=0,t=this.regionTargetPoints.length-1;t>this.centerRegionIndex;e++,t--)this.regionTargetPoints[t].screenOffset[1]=this.regionTargetPoints[e].screenOffset[1],this.regionTargetPoints[t].screenOffset[0]=i[0]-this.regionTargetPoints[e].screenOffset[0];if(this.invertY)for(let e of this.regionTargetPoints)e.screenOffset[1]=i[1]-e.screenOffset[1];return this.regionTargetPoints}}class ut{get dragSpaceWidth(){return this.itemManager.dragSpaceWidth}constructor(e,t){this.items=[],this.items=e.items,this.invertY=t,this.itemManager=new lt(e.items),this.regionManager=new ct(e.itemContainer,this.itemManager,t)}calcCenterRegionScreenWidth(e){return L(this.items[e.itemLeftOfDragCenterIndex].screenSpaceWidth,this.items[e.itemLeftOfDragCenterIndex+1].screenSpaceWidth,e.dragCenterPercentToRightItem)}setDragCenter(e){let t=this.itemManager.getCenterItemData(e),i=this.calcCenterRegionScreenWidth(t),n=this.regionManager.generateRegionTargetPoints(i,this.invertY);for(let e=0;e<this.items.length;e++){let i=this.regionManager.centerRegionIndex-1+e-t.itemLeftOfDragCenterIndex,s=i+1,r=n[i],a=n[s],o=this.items[e],l=L(a.scale,r.scale,t.dragCenterPercentToRightItem),h=p(a.getScaledOffset(o),r.getScaledOffset(o),t.dragCenterPercentToRightItem);o.element.style.transform=`translate(${h[0]}px, ${h[1]}px) scale(${l})`,o.element.style.zIndex=r.zIndex.toString()}}updateLayout(){this.itemManager.update()}}class pt{constructor(e,t,i){this.items=[],this.carouselElement=e,this.parent=t,this.pageManager=i,this.itemContainer=document.createElement("div"),this.itemContainer.classList.add("item-container"),e.append(this.itemContainer);let n=e.querySelectorAll(".carousel-item");if(n.length<2)throw new Error(`Fatal error occurred while creating a carousel: there must be at least two carousel-item elements \n            within the carousel, but there's only ${n.length}. Carousel element was ${e}`);let s=null;for(let e=0;e<n.length;e++){let t=n[e];this.itemContainer.append(t);let r=new ot(t);this.items.push(r);let a=i.pageNodes.get(r.pageRef);void 0!==a&&(a.onSelected.add(this.wasSelected.bind(this,e)),a.isSelectedChild&&(s=e));let o=new Je(r.element,{trackMoveEvents:!0});o.defaultPointBehavior.onClick.add(function(e,t,i){t.type!==We.TOUCH&&0!==i.button||(this.pageManager.selectPage(this.items[e].pageRef,!0),this.wasSelected(e))}.bind(this,e)),o.defaultPointBehavior.draggingAllowed=!0,o.defaultPointBehavior.draggingDisablesClicks=!0,o.defaultPointBehavior.dragThreshold=[10,10]}this.layoutHandler=new ut(this,this.carouselElement.hasAttribute("invert-y")),null!==s?this.selectedItemIndex=s:(this.selectedItemIndex=0,console.warn("No carousel item was initially selected.")),this.items[this.selectedItemIndex].element.classList.add("selected"),this.inputHandler=new Je(this.itemContainer,{trackMoveEvents:!0}),this.inputHandler.defaultPointBehavior.dragThreshold=[10,10],this.inputHandler.defaultMouseBehavior.onDrag.add(((e,t)=>{t.preventDefault()})),this.dragHandler=new rt(this.itemContainer),this.dragHandler.postDragBehavior=new it(new et,this.getNearestCenter.bind(this)),this.dragHandler.onNewPosition=this.updateItemPositions.bind(this),this.dragHandler.watch(this.inputHandler.defaultPointBehavior),t.isVisible&&this.layoutItems(),j.add((()=>{t.isVisible&&this.layoutItems()})),t.onMadeVisible.add(this.layoutItems.bind(this))}setSelectedClass(e,t){this.items[t].element.classList.remove("selected"),this.items[e].element.classList.add("selected")}wasSelected(e){this.selectedItemIndex!==e&&(this.parent.isVisible&&this.moveToItem(this.items[e]),this.setSelectedClass(e,this.selectedItemIndex),this.selectedItemIndex=e)}selectItem(e){this.selectedItemIndex!==e&&(this.setSelectedClass(e,this.selectedItemIndex),this.selectedItemIndex=e,this.pageManager.selectPage(this.items[e].pageRef,!0))}getItemIndexAt(e){for(let t=0;t<this.items.length;t++)if(this.items[t].dragSpaceRight>e)return t;return this.items.length-1}getNearestCenter(e){let t=this.getItemIndexAt(-e[0]);return this.selectItem(t),[-this.items[t].dragSpaceCenter,0]}updateItemPositions(e,t){this.layoutHandler.setDragCenter(-t[0])}layoutItems(){this.layoutHandler.updateLayout(),this.dragHandler.dragRestriction=new nt([-this.layoutHandler.dragSpaceWidth,0]),this.moveToItem(this.items[this.selectedItemIndex],!0)}moveToItem(e,t=!1){this.dragHandler.moveTo([-e.dragSpaceCenter,0],t?0:500)}}const gt=new class{registered(e){}pageCreated(e,t){let i=e.element.querySelectorAll(".carousel"),n=[];i.forEach((function(i){try{n.push(new pt(i,e,t))}catch(e){console.error(e)}}))}get name(){return"Carousel"}};class mt{constructor(e,t,i){this.upClickSet=!1,this.page=e,this.pageManager=t,this.element=i,this.upClickLListener=()=>{ve.scroll({y:0},500)},i.appendChild(document.createElement("hr"));let n=document.createElement("div");i.appendChild(n),this.addElement("left",n),this.upElement=this.addElement("up",n),this.addElement("right",n),this.updateUpArrowAvailability(),e.onMadeVisible.add(this.updateUpArrowAvailability.bind(this)),j.add(this.updateUpArrowAvailability.bind(this))}updateUpArrowAvailability(){if(this.page.isVisible){let e=this.page.element.getBoundingClientRect().bottom>document.documentElement.getBoundingClientRect().bottom;e?this.upElement.classList.remove("disabled"):this.upElement.classList.add("disabled"),this.updateUpClickBehavior(e)}}updateUpClickBehavior(e){e?this.upClickSet||(this.upClickSet=!0,this.upElement.addEventListener("click",this.upClickLListener)):this.upClickSet&&(this.upClickSet=!1,this.upElement.removeEventListener("click",this.upClickLListener))}addElement(e,t){let i=document.createElement("a"),n=document.createElement("div");n.appendChild(i);let s,r="",a=!1;if("up"!==e){let t=this.element.getAttribute(e),n=this.element.getAttribute(e+"PageRef");a=null===t||null===n,null===t&&(t=""),a&&i.classList.add("disabled"),r=t,s=null==n?"":n}let o=`<i class="fas fa-angle-double-${e}"></i>`;switch(e){case"left":r=`${o} ${r}`;break;case"right":r=`${r} ${o}`;break;case"up":r=o}return i.innerHTML=r,t.appendChild(n),a||"up"===e||i.addEventListener("click",function(){this.pageManager.selectPage(s,!0)}.bind(this)),i}}const ft=new class{registered(e){}pageCreated(e,t){e.element.querySelectorAll(".direction-nav").forEach((function(i){(function(e,t){for(;null!==e.parentElement;){if(e.parentElement.matches(".page"))return e.parentElement;e=e.parentElement}return null})(i)===e.element&&new mt(e,t,i)}))}get name(){return"Direction Nav"}},wt=new class{registered(e){}pageCreated(e,t){e.element.querySelectorAll(".small-caps").forEach((function(e){e.innerHTML=e.innerHTML.replace(/\b([a-z])/gi,(function(e){return`<span class="bigger">${e}</span>`}))}))}get name(){return"Small Caps"}},vt=new class{registered(e){}pageCreated(e,t){e.owner.onPathDeselected.add((t=>{e.element.querySelectorAll("youtube-video").forEach((e=>{null!==e.player&&e.player.pauseVideo()}))}))}get name(){return"Video Manager"}};function yt(){const e=window.location.search;return new URLSearchParams(e).get("page")||"/"}window.addEventListener("load",(function(){try{const e=new pe(Se);e.setHomePage("/home"),e.set404Page("/page_not_found"),function(e){e.registerPageAddon(gt),e.registerPageAddon(ft),e.registerPageAddon(wt),e.registerPageAddon(vt)}(e),function(e){!function(e){Ae=e,window.customElements.define("page-link",Re)}(e),window.customElements.define("expandable-img",ke),window.customElements.define("fullscreen-button",Ee),window.customElements.define("fullscreen-img",Me),window.customElements.define("x-button",Ne),window.customElements.define("expandable-div",Ce),function(){Ve=document.createElement("script");var e=document.getElementsByTagName("head")[0];Ve.src="https://www.youtube.com/iframe_api",e.appendChild(Ve);let t=i();Fe=t.promise,window.onYouTubeIframeAPIReady=()=>{t.resolve()},window.customElements.define("youtube-video",Be)}()}(e),new G(e);let t=new Object;e.onNodeSelected.add(((e,i,n)=>{n!==t&&(window.history.pushState("","","?page="+e.selectedLeaf.pageRef),document.title=e.selectedLeaf.title)})),e.selectPage(yt(),!1,t),document.title=e.root.selectedLeaf.title,window.onpopstate=function(i){e.selectPage(yt(),!0,t),document.title=e.root.selectedLeaf.title}}catch(e){console.error("A problem ocurred\n"+e)}}))})();